<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="clr-namespace:Swarm.Avalonia.ViewModels"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="600"
             x:Class="Swarm.Avalonia.Views.PeersView"
             x:DataType="vm:PeersViewModel">
    
    <Grid RowDefinitions="Auto,*" Margin="24">
        <!-- Header -->
        <Grid Grid.Row="0" ColumnDefinitions="*,Auto" Margin="0,0,0,24">
            <TextBlock Text="Peers" 
                       FontSize="28" 
                       FontWeight="Bold" 
                       Foreground="{StaticResource TextPrimaryBrush}"/>
            
            <Button Grid.Column="1" Classes="primary">
                <StackPanel Orientation="Horizontal">
                    <PathIcon Data="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" 
                              Foreground="#09090b" 
                              Width="14" Height="14"/>
                    <TextBlock Text="Discover Devices" Margin="8,0,0,0"/>
                </StackPanel>
            </Button>
        </Grid>
        
        <!-- Peer List -->
        <Border Grid.Row="1" Classes="card" Padding="0">
            <Grid RowDefinitions="Auto,*">
                <!-- Empty State -->
                <StackPanel Grid.Row="1" 
                            VerticalAlignment="Center" 
                            HorizontalAlignment="Center"
                            IsVisible="{Binding !Peers.Count}">
                    <PathIcon Data="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z" 
                              Foreground="{StaticResource TextMutedBrush}" 
                              Width="64" Height="64" 
                              Opacity="0.5"
                              HorizontalAlignment="Center"/>
                    <TextBlock Text="No peers discovered" 
                               FontSize="18" 
                               FontWeight="SemiBold"
                               Foreground="{StaticResource TextSecondaryBrush}" 
                               HorizontalAlignment="Center"
                               Margin="0,16,0,8"/>
                    <TextBlock Text="Make sure other devices are running Swarm on the same network" 
                               Foreground="{StaticResource TextMutedBrush}" 
                               HorizontalAlignment="Center"/>
                </StackPanel>
                
                <!-- Peer List -->
                <ListBox Grid.Row="1"
                         ItemsSource="{Binding Peers}" 
                         SelectedItem="{Binding SelectedPeer}"
                         Background="Transparent"
                         BorderThickness="0"
                         IsVisible="{Binding Peers.Count}">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <Grid ColumnDefinitions="Auto,*,Auto,Auto" Margin="16,12">
                                <!-- Status Indicator -->
                                <Ellipse Grid.Column="0" 
                                         Width="10" Height="10" 
                                         VerticalAlignment="Center" 
                                         Margin="0,0,16,0"
                                         Fill="{StaticResource StatusOnlineBrush}"/>
                                
                                <!-- Name & IP -->
                                <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                    <TextBlock Text="{Binding Name}" 
                                               Foreground="{StaticResource TextPrimaryBrush}"
                                               FontWeight="Medium"/>
                                    <TextBlock Text="{Binding IpAddress}" 
                                               Foreground="{StaticResource TextMutedBrush}"
                                               FontSize="11"
                                               Margin="0,2,0,0"/>
                                </StackPanel>
                                
                                <!-- Trust Badge -->
                                <Border Grid.Column="2" 
                                        IsVisible="{Binding IsTrusted}"
                                        Background="#152dd4bf" 
                                        CornerRadius="4" 
                                        Padding="8,4"
                                        Margin="16,0"
                                        VerticalAlignment="Center">
                                    <TextBlock Text="Trusted" 
                                               Foreground="{StaticResource AccentPrimaryBrush}" 
                                               FontSize="11" 
                                               FontWeight="SemiBold"/>
                                </Border>
                                
                                <!-- Actions -->
                                <StackPanel Grid.Column="3" Orientation="Horizontal" VerticalAlignment="Center">
                                    <Button Classes="icon" ToolTip.Tip="Send Files">
                                        <PathIcon Data="M9 16h6v-6h4l-7-7-7 7h4v6zm-4 2h14v2H5v-2z" 
                                                  Foreground="{StaticResource TextSecondaryBrush}" 
                                                  Width="14" Height="14"/>
                                    </Button>
                                    <Button Classes="icon" ToolTip.Tip="Settings">
                                        <PathIcon Data="M19.14 12.94c.04-.31.06-.63.06-.94 0-.31-.02-.63-.06-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z" 
                                                  Foreground="{StaticResource TextSecondaryBrush}" 
                                                  Width="14" Height="14"/>
                                    </Button>
                                </StackPanel>
                            </Grid>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </Grid>
        </Border>
    </Grid>
</UserControl>
