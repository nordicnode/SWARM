<Window x:Class="Swarm.UI.ConflictResolutionDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="File Conflict" 
        Height="450" Width="650"
        MinHeight="350" MinWidth="550"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize">
    
    <Border Background="{StaticResource BackgroundDarkBrush}" 
            CornerRadius="12" 
            BorderBrush="#30FFFFFF" 
            BorderThickness="1">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="48"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- ========== TITLE BAR ========== -->
            <Border Grid.Row="0" Background="{StaticResource BackgroundMediumBrush}" 
                    CornerRadius="12,12,0,0" MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">
                <Grid>
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Margin="16,0">
                        <!-- Warning Icon -->
                        <Path Data="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"
                              Width="20" Height="20" 
                              Stretch="Uniform"
                              Fill="#fbbf24"
                              VerticalAlignment="Center"/>
                        <TextBlock Text="File Conflict Detected" FontWeight="Bold" FontSize="16" 
                                   Foreground="{StaticResource TextPrimaryBrush}" 
                                   VerticalAlignment="Center" Margin="12,0,0,0"/>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- ========== FILE INFO ========== -->
            <Border Grid.Row="1" Background="{StaticResource BackgroundMediumBrush}" Padding="16,12">
                <StackPanel>
                    <TextBlock Text="The following file has been modified on both this device and another device:" 
                               Foreground="{StaticResource TextSecondaryBrush}" FontSize="13" TextWrapping="Wrap"/>
                    <TextBlock x:Name="FilePathText" Text="documents/report.docx" 
                               Foreground="{StaticResource TextPrimaryBrush}" FontSize="14" FontWeight="SemiBold"
                               Margin="0,8,0,0" TextTrimming="CharacterEllipsis"/>
                </StackPanel>
            </Border>

            <!-- ========== COMPARISON ========== -->
            <Grid Grid.Row="2" Margin="16">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="16"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                
                <!-- Local Version -->
                <Border Grid.Column="0" Background="{StaticResource BackgroundMediumBrush}" 
                        CornerRadius="8" Padding="16">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                            <Path Data="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"
                                  Width="18" Height="18" Stretch="Uniform"
                                  Fill="{StaticResource AccentPrimaryBrush}"/>
                            <TextBlock Text="This Device" FontWeight="Bold" FontSize="14"
                                       Foreground="{StaticResource TextPrimaryBrush}"
                                       VerticalAlignment="Center" Margin="8,0,0,0"/>
                        </StackPanel>
                        
                        <TextBlock Text="Modified" Foreground="{StaticResource TextMutedBrush}" FontSize="11"/>
                        <TextBlock x:Name="LocalModifiedText" Text="Dec 27, 2024 10:15 AM" 
                                   Foreground="{StaticResource TextPrimaryBrush}" FontSize="13" Margin="0,2,0,8"/>
                        
                        <TextBlock Text="Size" Foreground="{StaticResource TextMutedBrush}" FontSize="11"/>
                        <TextBlock x:Name="LocalSizeText" Text="2.4 MB" 
                                   Foreground="{StaticResource TextPrimaryBrush}" FontSize="13" Margin="0,2,0,8"/>
                        
                        <TextBlock Text="Hash" Foreground="{StaticResource TextMutedBrush}" FontSize="11"/>
                        <TextBlock x:Name="LocalHashText" Text="A1B2C3D4..." 
                                   Foreground="{StaticResource TextSecondaryBrush}" FontSize="11" 
                                   FontFamily="Consolas" Margin="0,2,0,0"/>
                    </StackPanel>
                </Border>
                
                <!-- VS Divider -->
                <TextBlock Grid.Column="1" Text="VS" 
                           Foreground="{StaticResource TextMutedBrush}"
                           FontSize="12" FontWeight="Bold"
                           HorizontalAlignment="Center" VerticalAlignment="Center"/>
                
                <!-- Remote Version -->
                <Border Grid.Column="2" Background="{StaticResource BackgroundMediumBrush}" 
                        CornerRadius="8" Padding="16">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                            <Path Data="M20 18c1.1 0 1.99-.9 1.99-2L22 6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2H0v2h24v-2h-4zM4 6h16v10H4V6z"
                                  Width="18" Height="18" Stretch="Uniform"
                                  Fill="#22c55e"/>
                            <TextBlock x:Name="RemotePeerText" Text="Laptop" FontWeight="Bold" FontSize="14"
                                       Foreground="{StaticResource TextPrimaryBrush}"
                                       VerticalAlignment="Center" Margin="8,0,0,0"/>
                        </StackPanel>
                        
                        <TextBlock Text="Modified" Foreground="{StaticResource TextMutedBrush}" FontSize="11"/>
                        <TextBlock x:Name="RemoteModifiedText" Text="Dec 27, 2024 10:20 AM" 
                                   Foreground="{StaticResource TextPrimaryBrush}" FontSize="13" Margin="0,2,0,8"/>
                        
                        <TextBlock Text="Size" Foreground="{StaticResource TextMutedBrush}" FontSize="11"/>
                        <TextBlock x:Name="RemoteSizeText" Text="2.5 MB" 
                                   Foreground="{StaticResource TextPrimaryBrush}" FontSize="13" Margin="0,2,0,8"/>
                        
                        <TextBlock Text="Hash" Foreground="{StaticResource TextMutedBrush}" FontSize="11"/>
                        <TextBlock x:Name="RemoteHashText" Text="E5F6G7H8..." 
                                   Foreground="{StaticResource TextSecondaryBrush}" FontSize="11" 
                                   FontFamily="Consolas" Margin="0,2,0,0"/>
                    </StackPanel>
                </Border>
            </Grid>

            <!-- ========== ACTION BUTTONS ========== -->
            <Border Grid.Row="3" Background="{StaticResource BackgroundMediumBrush}" 
                    CornerRadius="0,0,12,12" Padding="16,12">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    
                    <Button Grid.Column="0" Content="Keep Local" 
                            Style="{StaticResource SecondaryButtonStyle}"
                            Padding="16,10" Margin="0,0,8,0"
                            Click="KeepLocal_Click">
                        <Button.ToolTip>Keep the version from this device</Button.ToolTip>
                    </Button>
                    
                    <Button Grid.Column="1" Content="Keep Remote" 
                            Style="{StaticResource SecondaryButtonStyle}"
                            Padding="16,10" Margin="0,0,8,0"
                            Click="KeepRemote_Click">
                        <Button.ToolTip>Accept the version from the other device</Button.ToolTip>
                    </Button>
                    
                    <Button Grid.Column="2" Content="Keep Both" 
                            Style="{StaticResource SecondaryButtonStyle}"
                            Padding="16,10" Margin="0,0,8,0"
                            Click="KeepBoth_Click">
                        <Button.ToolTip>Save remote as a separate conflict file</Button.ToolTip>
                    </Button>
                    
                    <Button Grid.Column="3" Content="Skip" 
                            Background="Transparent" 
                            Foreground="{StaticResource TextSecondaryBrush}"
                            BorderThickness="0"
                            Padding="16,10" Cursor="Hand"
                            Click="Skip_Click">
                        <Button.ToolTip>Skip this conflict (decide later)</Button.ToolTip>
                    </Button>
                </Grid>
            </Border>
        </Grid>
    </Border>
</Window>
